---
title: "黑苹果教程"
date: 2019-03-12T22:01:24+08:00
categories: ["技术"]
tags: ["黑苹果","暗影精灵"]
---

![](/images/tech/2019/clover/c001.png)

## 写在前面

这可能、应该、也许是我写的最后一篇黑苹果相关文章(至少在我买新电脑之前)，以后精力全部放在学习上，建议后来想要研究黑苹果的同学们早日弃坑，把时间放在更宝贵的事情上吧。经过一些调查，很多同学们装黑苹果的原因无非就是：折腾，当然也有其它的回答。但是，折腾的同时也确实可以学到很多东西。我想说的是，虽然黑苹果非常适合爱折腾的你，但是，折腾明白之后、或者是折腾不来，那么还是劝你早日退坑。。。

![](/images/tech/2019/clover/c002.png)

## 配置一览表

| OMEN by HP Laptop 15-ce0xx | HP 暗影精灵3               |
| -------------------------- | -------------------------- |
| BIOS版本                   | F.18-11/09/2018            |
| CPU                        | i7-7700HQ                  |
| 显卡                       | nVidia GTX 1050            |
| 声卡                       | ALC295                     |
| 硬盘                       | HP SSD EX950 512G、HGST 1T |

如果你的电脑和我同配置的话，EFI文件可以直接用我的安装使用，配置相仿的不可以直接使用，自己可以根据我的配置按需调整。但是请注意，我GitHub里的并不是完整的EFI，但是足够跟我同配置的同学安装使用了。

## 安装准备

### 下载

相关的文件我都在我的GitHub发布了，打不开或者下载不来的，自己多研究研究吧，一切随缘！！！（当然这个项目可能还不太完善，我会慢慢整理的，避免大家走弯路！当然，你有什么好资源，也可以让我上传，毕竟这是个开源项目！仅限于学习研究使用！），没错，为了方便大家下载，我把文件打包了，不打包有的小伙伴下载不来。👉[GitHub](https://github.com/besscroft/HP-OMEN-3-Hackintosh)

### 一些说明

- 声卡正常，键盘可以调声音
- 摄像头正常
- 触摸板正常
- 睡眠和唤醒正常，合上盖子再打开也正常，我不知道白苹果是怎样的，但是我试了很多次，没发现问题。
- 电池正常
- 有线网卡正常
- 亮度正常，但是不能用键盘调整，在设置里面可以调整（我得再去爪巴帖子了😓
- 独显因为不能驱动，所以屏蔽
- 蓝牙
- WiFi :(

### BIOS设置

HP的BIOS建议：

- 关闭安全模式

其它品牌建议还要：设置为AHCI模式

嗯~ o(*￣▽￣*)o，有空再写，不着急。。。

### 准备

在开始前，我们建议你准备一个最好大于8G的U盘、一台电脑(不熟练的人建议2台)、一个具有你Windows系统恢复介质的U盘(因为装黑苹果导致Windows挂掉的人不在少数)，一个用来备份的移动硬盘(如果你没有需要备份的文件请随意)。

1. 原版镜像，注意是原版的加工封装的OS镜像，带不带Clover引导无所谓，新手建议带上，那样就不用自己配置了！
2. U盘烧写工具，有很多，我用的TransMac，所以建议使用TransMac。
3. 硬盘管理工具，这个当然是DG了！
4. EFI启动引导项管理工具，推荐EasyUEFI或者UEFIBCD。
5. 强制性要求：主板必须支持UEFI，这篇文章是适用于UEFI启动的，如果不是的话，你看这篇文章也没意义。
6. 硬盘为GPT格式。
7. 给黑苹果的EFI分区一定要大于200M！！！

### 安装MacOS

开机按F9进入`Boot Manager`引导管理，选择你制作的那个U盘，然后回车！

然后进入Clover主菜单

![](/images/tech/2019/clover/c003.png)

移动光标到`Boot OS X Install from ***`回车,如果无法进入安装界面,需要打开啰嗦模式进行排错,不过新手可能看不懂，但是也要拍照，给知道的人帮忙看看。

#### 引导MacOS

![](/images/tech/2019/clover/c004.png)

基本上就是图中的样子啦！稍等片刻。具体时间决定于你的配置，耐心等待一小会儿进入安装程序界面。

#### 语言选择

建议选择简体中文哦！😋

![](/images/tech/2019/clover/c005.png)

点击下一步，出现`macOS实用工具`界面,选择磁盘工具

![](/images/tech/2019/clover/c006.png)

进入磁盘工具之后，选择`显示所有设备`:

![](/images/tech/2019/clover/c007.png)

选择`你在Windows下事先创建好，准备给macos用的那个分区`,点击`抹掉`按钮,选择默认的`Mac OS扩展(日志型)`,将名称修改为`你自己喜欢的名字即可`,点击`抹掉`按钮。

**之前专门强调了备份了的啊！！！千万注意！！！**

如果这时候报错，是由于EFI分区尺寸小于200MB而引起的抹盘失败的错误，甚至可能会导致后面的安装失败！！！

#### 安装开始啦！

这个时候我们选择希望，哦不，是选择安装macOS

![](/images/tech/2019/clover/c008.png)

进入安装界面

![](/images/tech/2019/clover/c009.png)

下一步

![](/images/tech/2019/clover/c010.png)

选择继续，然后选择你才格式化了的硬盘。

在这期间,它会把USB安装盘上的安装文件预复制到要安装的系统分区里,这个过程在HP暗影精灵3上它跑得飞快(我放在固态上了),数据复制完后,它会自动重启

其实我感觉安装，和安装完了的设置，压根没必要写啥教程，因为你能进入这个界面的话，说明你的能力足够你一个人完成。

#### 设置向导

不多说废话了，也不放图，简单粗暴的列几条建议：

- 首先会让你选择国家，在这一步我选择中国！
- 设置键盘，根据自己的习惯选择
- 如果是新安装，建议不传输信息到这台Mac
- 数据恢复，嗯，跳过吧
- Apple ID登录，建议进入系统后再登录
- 创建用户，这一步很简单
- 反正有啥要你同步的一律先不干，也不要连接到互联网，建议进入系统后再慢慢设置。

### 安装完成后

千万别以为这样就完事儿了，Windows安装完之后都还需要联网安装更新呢，后面更艰巨的任务在等着你，小老弟🤣

#### 挂载EFI分区

首先你肯定得把你U盘里的EFI文件弄到电脑上的EFI分区里去，如果你不愿意干这一步，那么你每次启动MacOS都将插上U盘。虽然我有一段时间这么干过，因为我觉得不插上U盘的时候，感觉MacOS系统就不存在了一样，要用的时候直接插上U盘即可！如果你想将U盘里的EFI复制到磁盘的EFI分区里，却苦于找不到看不见EFI分区，这个时候是该让`diskutil`登场了。

查看磁盘分区表：

```
diskutil list
```

挂载磁盘EFI分区：

```
sudo diskutil mount <这里填你的分区，比如：disk0s1，具体的查看你的磁盘分区表>
```

挂载U盘EFI分区：

```
sudo diskutil mount <这里填你的分区，比如：disk0s1，具体的查看你的磁盘分区表>
```

打开Finder，注意后面有个`.`

```
open .
```

左侧会显示挂载了两个EFI分区，将U盘EFI目录全部复制到磁盘的EFI分区即可。

#### 合并EFI分区

**这里有一点需要注意**:如果之前安装过Windows系统的话,会存在EFI的目录,只是EFI的目录下面只有BOOT和Microsoft这两个目录,如果希望添加macOS的Clover引导的话,可以将USB的EFI分区里面的EFI目录下面的CLOVER复制到磁盘里的EFI目录下,也就是执行的是**合并**的操作,让EFI同时支持WINDOWS和macOS的引导.千万不要全部复制,否则有可能造成EFI无法启动Windows.

#### 复制EFI分区

如果磁盘上的EFI分区里为空的,可以直接将USB的EFI分区下面的EFI目录直接复制到磁盘上的EFI分区里.

#### Windows下的骚操作

##### 挂载EFI分区

Windows操作系统下面,打开`cmd`窗口,输入命令:

```
diskpart
list disk           # 磁盘列表
select disk n       # 选择EFI分区所在的磁盘，n为磁盘号
list partition      # 磁盘分区列表
select partition n  # 选择EFI分区，n为EFI分区号
set id="ebd0a0a2-b9e5-4433-87c0-68b6b72699c7"	# 设置为EFI分区
assign letter=X     # x为EFI分区盘符
```

您可以重复输入命令同时挂载USB的EFI分区和磁盘的EFI分区
打开资源管理器，会出现一个盘符为X的磁盘，格式化为fat32格式,将USB的EFI分区下面的EFI目录复制到安装磁盘的EFI分区下。

##### 合并EFI分区

**这里有一点需要注意**:如果之前安装过Windows系统的话,会存在EFI的目录,只是EFI的目录下面只有BOOT和Microsoft这两个目录,如果希望添加macOS的Clover引导的话,可以将USB的EFI分区里面的EFI目录下面的CLOVER复制到磁盘里的EFI目录下,也就是执行的是**合并**的操作,让EFI同时支持WINDOWS和macOS的引导.千万不要全部复制,否则有可能造成EFI无法启动Windows.

##### 复制EFI分区

如果磁盘上的EFI分区里为空的,可以直接将USB的EFI分区下面的EFI目录直接复制到磁盘上的EFI分区里.

##### 利用EasyUEFI来挂载

什么?看不懂这些指令，怕出错？我懂你！你可以在Windows系统下利用诸如EasyUEFI等工具来操作。

我们打开下载好的diskgenius工具

![](/images/tech/2019/clover/c011.png)

EFI分区的文件一般是这样的

![](/images/tech/2019/clover/c012.png)

打开EsayUEFI，点击中间的绿色加号，进入添加引导项的页面，选择"Linux或其它操作系统"，并且在Description这一项写入这个引导项的名字(名字可以随便乱取，但是别忘记！)。然后在下面的硬盘选择区域选择一个你自己新建的ESP分区，然后点击下方的Browse浏览文件。

![](/images/tech/2019/clover/c013.png)

然后选择自己配置好的EFI中的**CLOVERx64.efi**这个文件以完成添加。

![](/images/tech/2019/clover/c014.png)

然后回到工具的首页，将该引导项置顶(置不置顶看你自己选择了，想要开机可以选择双系统就置顶，想要开机直接进入Windows，就放在Windows Boot Manager后面)

![](/images/tech/2019/clover/c015.png)

到这里就大功告成啦！

##### EasyUEFI报错

- 这个可能是因为BIOS设置问题，如果加了BIOS密码，会报这个错误。还有可能就是EFI分区没有正常挂载的原因。遇到这个问题，有的时候照样能够添加进去引导项，但是无法移动引导项的顺序。这样的话，你可以先添加，再进入BIOS设置引导顺序，或者是直接在BIOS里面添加启动项。如果EasyUEFI完全没有作用，你可以尝试进入PE卸载ESP分区重新启动或是先备份系统的EFI分区，然后使用DG将原本的EFI分区删除，重建以后重启即可。
- 可能是当前版本的EasyUEFI出现了问题、或者是你下的有问题、或者是当前版本与你的电脑不兼容

##### 利用BOOTICE

1. 打开BOOTICE软件,选择`物理磁盘`,选择欲操作的目标磁盘,点击`分区管理`,弹出分区管理的窗口,点击`分配盘符`,为`ESP`分区分配一个盘符,点击确定
2. 选择`UEFI`,点击`修改启动序列`,点击`添加`按钮,菜单标题填写:`CLOVER`,选择`启动文件`,在打开的窗口里选择`ESP`分区下的目录`\EFI\CLOVER\CLOVERX64.EFI`,点击`保存当前启动项设置`


## 下载链接

迅雷离线下载：[点击下载](https://mirrors.dtops.cc/iso/MacOS/daliansky_macos/macOS%20Mojave%2010.14.3%2818D42%29%20Installer%20with%20Clover%204859.dmg)感谢`@难忘情怀`提供下载资源

http下载链接：[点击下载](https://mirrors.dtops.cc/iso/MacOS/daliansky_macos/)感谢`@难忘情怀`提供下载资源

百度网盘：[点击链接](https://pan.baidu.com/s/1mEqQKm_klaSOB5KhqpobQA ) 接头暗号：s68r 
MD5 (macOS Mojave 10.14.3(18D42) Installer with Clover 4859.dmg) = 450c55e5c5d3f4bfae6bb55ff2a33aea

### EFI下载/更新

[点击这里](https://github.com/besscroft/HackintoshClover)进入魔法门

## 特别鸣谢

`@原味菠萝` `@黑果小兵` 为本教程提供的的大力支持！