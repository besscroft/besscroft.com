<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 4.2.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicon-24x24-astronaut.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-astronaut.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-astronaut.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://fonts.loli.net/css?family=Noto Serif SC:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"blog.52bess.com",root:"/",scheme:"Mist",version:"7.8.0",exturl:!0,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:"mac"},back2top:{enable:!0,sidebar:!1,scrollpercent:!1},bookmark:{enable:!0,color:"#222",save:"auto"},fancybox:!0,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},localsearch:{enable:!0,trigger:"auto",top_n_per_article:-1,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><script data-ad-client="ca-pub-1837014247459400" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><meta name="description" content="前言很多接触过云服务的小伙伴，可能经常会有一个困扰：为什么我的CPU、内存占用明明不高，网站速度&#x2F;服务器响应速度却还是这么慢呢？哪个可爱的男孩子不想拥有一个速度很快的博客呢？说到优化，我们得从诸如硬件、软件等很多地方入手。"><meta property="og:type" content="article"><meta property="og:title" content="网站和服务器速度优化"><meta property="og:url" content="https://blog.52bess.com/posts/2021/website-server-speed-optimization.html"><meta property="og:site_name" content="Bess&#39;s Blog"><meta property="og:description" content="前言很多接触过云服务的小伙伴，可能经常会有一个困扰：为什么我的CPU、内存占用明明不高，网站速度&#x2F;服务器响应速度却还是这么慢呢？哪个可爱的男孩子不想拥有一个速度很快的博客呢？说到优化，我们得从诸如硬件、软件等很多地方入手。"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2021-03-16T08:49:16.000Z"><meta property="article:modified_time" content="2021-03-16T08:51:43.982Z"><meta property="article:author" content="Bess Croft"><meta property="article:tag" content="网站优化"><meta property="article:tag" content="服务器优化"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://blog.52bess.com/posts/2021/website-server-speed-optimization.html"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><title>网站和服务器速度优化 | Bess's Blog</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="Bess's Blog" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><script type="text/javascript" src="/js/none.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/besscroft/cdn/css/APlayer.min.css"><div id="aplayer"></div><script type="text/javascript" src="https://cdn.jsdelivr.net/gh/besscroft/cdn/js/APlayer.min.js"></script><script type="text/javascript" src="/dist/music.js"></script><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">Bess's Blog</h1><span class="logo-line-after"><i></i></span></a><p class="site-subtitle" itemprop="description">武汉加油！中国加油！</p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="home fa-fw"></i> 首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="tags fa-fw"></i> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="th fa-fw"></i> 分类</a></li><li class="menu-item menu-item-links"><a href="/links/" rel="section"><i class="link fa-fw"></i> 友链</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="archive fa-fw"></i> 归档</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="user fa-fw"></i> 关于</a></li><li class="menu-item menu-item-books"><a href="/books/" rel="section"><i class="book fa-fw"></i> 读书</a></li><li class="menu-item menu-item-movies"><a href="/movies/" rel="section"><i class="video-camera fa-fw"></i> 电影</a></li><li class="menu-item menu-item-games"><a href="/games/" rel="section"><i class="gamepad fa-fw"></i> 游戏</a></li><li class="menu-item menu-item-photos"><a href="/photos/" rel="section"><i class="camera-retro fa-fw"></i> 美好时光</a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="sitemap fa-fw"></i> 站点地图</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><div class="reading-progress-bar"></div><a role="button" class="book-mark-link book-mark-link-fixed"></a> <span class="exturl github-corner" data-url="aHR0cHM6Ly9naXRodWIuY29tL2Jlc3Njcm9mdA==" title="Follow me on GitHub" aria-label="Follow me on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></span><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content post posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://blog.52bess.com/posts/2021/website-server-speed-optimization.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="https://www.52bess.com/uploads/avatar.png"><meta itemprop="name" content="Bess Croft"><meta itemprop="description" content="热爱网络技术和开源软件的极客"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Bess's Blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> 网站和服务器速度优化</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2021-03-16 16:49:16 / 修改时间：16:51:43" itemprop="dateCreated datePublished" datetime="2021-03-16T16:49:16+08:00">2021-03-16</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E7%BD%91%E7%AB%99%E4%BC%98%E5%8C%96/" itemprop="url" rel="index"><span itemprop="name">网站优化</span></a></span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E7%BD%91%E7%AB%99%E4%BC%98%E5%8C%96/%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%BC%98%E5%8C%96/" itemprop="url" rel="index"><span itemprop="name">服务器优化</span></a></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i></span> <span class="post-meta-item-text">Valine：</span><a title="valine" href="/posts/2021/website-server-speed-optimization.html#valine-comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/posts/2021/website-server-speed-optimization.html" itemprop="commentCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>很多接触过云服务的小伙伴，可能经常会有一个困扰：为什么我的CPU、内存占用明明不高，网站速度/服务器响应速度却还是这么慢呢？<del>哪个可爱的男孩子不想拥有一个速度很快的博客呢？</del>说到优化，我们得从诸如硬件、软件等很多地方入手。</p><a id="more"></a><h2 id="开始优化"><a href="#开始优化" class="headerlink" title="开始优化"></a>开始优化</h2><h3 id="为什么我们需要优化？"><a href="#为什么我们需要优化？" class="headerlink" title="为什么我们需要优化？"></a>为什么我们需要优化？</h3><p>当我们购买了一台云服务器/VPS，并在上面架设了网站，那么我们肯定是需要给用户提供访问的。当别人或者你自己，访问这个网站时，通常会在浏览器中输入<code>example.com</code>之类的网址吧。但是，浏览器并不会知道这个网址的任何信息，这时我们的电脑会在Internet找到网址所在。在这个过程中，有相当多的因素，可以影响我们的网站速度，所以我们必须考虑服务器和浏览器之间的所有情况。</p><h3 id="DNS解析优化"><a href="#DNS解析优化" class="headerlink" title="DNS解析优化"></a>DNS解析优化</h3><p>我们知道，每一个网址都会对应着一个IP地址，而我们请求网址的时候，会通过DNS服务器去进行解析，从而将访问路由到对应的网站或者应用服务器。在设置DNS解析时，我们可以对域名进行分运营商设置、分地域设置等等，甚至，你还可以做负载均衡。比如电信用户的请求，可以设置解析到针对电信优化的线路的服务器上；分地域解析，同样可以设置成针对当前用户的最优解析。</p><h3 id="链路优化"><a href="#链路优化" class="headerlink" title="链路优化"></a>链路优化</h3><p>浏览器是需要与服务器之间进行通信的，但如果服务器位置距离浏览器很远，或者是它们之间的网络链路并不算很好（想象一下高速公路和普通公路😀）。那么坑你会增加等待的时间，尤其是丢包，这是很致命的问题，可能会导致网站一直无法响应完成。每次询问服务器，毕竟是要耗时间的，不是吗？</p><h3 id="动态OR静态"><a href="#动态OR静态" class="headerlink" title="动态OR静态"></a>动态OR静态</h3><p>一般来讲，静态网站加载速度是比动态网站要快的。有时候会取决于Web服务器的开销，有时候是数据库的。</p><h3 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h3><p>对于动态网站，我们也是可以针对数据库进行优化的。比如数据库放在本机还是其它机器上，如果放在其它机器上，是内网通信还是公网通信。用不用读写分离、集群、Redis等等？扯远了扯远了，咱还是以普通的网站/博客来进行讨论吧😅</p><h3 id="数据的计算-渲染时间"><a href="#数据的计算-渲染时间" class="headerlink" title="数据的计算/渲染时间"></a>数据的计算/渲染时间</h3><p>网站上面可能需要进行一些数学计算、过程处理、动画渲染等，会消耗相应的时间。当然，我们可以适当的调整尺度，或者是放在服务端处理部分内容。</p><h3 id="CPU的性能"><a href="#CPU的性能" class="headerlink" title="CPU的性能"></a>CPU的性能</h3><p>网站在浏览器的加载速度，在一定程度上也会受到用户计算机的CPU影响。不过一般来说，对于简单的网页应该不成问题。当然，服务器的CPU也是关键因素之一。如果你的网站，有太多人访问的话，你可以考虑下升级服务器的配置了。</p><h3 id="加密-安全"><a href="#加密-安全" class="headerlink" title="加密/安全"></a>加密/安全</h3><p>现在绝大部分的网站，都是支持HTTPS的了。为了安全使用SSL或TLS，会给网页的加载带来额外的性能开销。但是大多数情况下，这种开销是值得的👻</p><h3 id="内存优化"><a href="#内存优化" class="headerlink" title="内存优化"></a>内存优化</h3><p>每一次针对服务器的请求，都会占用Web服务器在单位时间内可以处理的请求数，同时也会占用内存。不过，我们得先调查清楚，在自己的服务器上，到底是请求数先被消耗完，还是内存先被消耗完。</p><h3 id="网络攻击防护"><a href="#网络攻击防护" class="headerlink" title="网络攻击防护"></a>网络攻击防护</h3><p>互联网的公网环境，有时候并没有想象的那么好。我在阿里云的ECS，被人攻击进入过黑洞状态。在DigitalOcean的服务器，曾被人消耗掉了接近3T的流量。对于很多人/企业来说，遭受网络攻击带来的直接损失并不算什么，但导致业务无法正常运行才是致命的问题。有这方面需求的小伙伴，建议去Google多搜一搜怎么防护，我也只是会一些简单的防护😅。如果你想简单的了解下，可以看看阮一峰的<span class="exturl" data-url="aHR0cHM6Ly93d3cucnVhbnlpZmVuZy5jb20vYmxvZy8yMDE4LzA2L2Rkb3MuaHRtbA==">DDOS 攻击的防范教程<i class="fa fa-external-link-alt"></i></span></p><h3 id="服务器与CDN的优化"><a href="#服务器与CDN的优化" class="headerlink" title="服务器与CDN的优化"></a>服务器与CDN的优化</h3><p>在选购服务器时，一个重要的指标就是网络。比如是按带宽选购，还是按流量选购。这2种不同的方式，效果肯定是不一样的，拿1M小水管来举例子，同时有很多用户访问的话，速度是相当的慢的。那么这种情况下，CDN就成为了一种可行的解决方案了。通过CDN可以将静态内容高速缓存到更靠近用户的位置，同时也能节省服务器带宽。</p><h3 id="服务器入侵自查"><a href="#服务器入侵自查" class="headerlink" title="服务器入侵自查"></a>服务器入侵自查</h3><p>有时候，会有一些人入侵你的服务器，并用来挖矿、当作肉鸡等。如果服务器突然变慢，且CPU占用一直非常高，可能就需要注意了。当然，我们也得有些好习惯，比如不采用密码，而是用公钥登录，可以防止一部分脚本自动爆破，同时不要开放太多不必要的端口。</p><h3 id="静态资源优化"><a href="#静态资源优化" class="headerlink" title="静态资源优化"></a>静态资源优化</h3><p>我们可以对HTML、CSS、图片等资源进行压缩，以减少带来的带宽消耗。我是用的gulp进行压缩的，压缩前后对比，减少了不小的文件大小。</p><p>在每次打包时，对资源进行压缩。其实我们可以在开发时，就将这个问题考虑进来。举个例子，引用一个CSS框架，我们一般可能会把完整的包，或者是min包整个引入。然后在浏览器加载的时候，会下载完整的包。但是这里有个问题，这个框架里面的所有属性你都用到了吗？显然是没有的。所以我们可以用Sass，在开发的时候按需加载组件（现在这么干的其实挺多了）。在编写HTML的时候，也可以适当的优化。更小的HTML和CSS，不仅减少了服务器的传输压力，也加快了浏览器的加载速度。更重要的是，浏览器不需要再去解析用不到的DOM和CSS Rules了，那么渲染速度也会得到很快的提升。</p><h3 id="懒加载"><a href="#懒加载" class="headerlink" title="懒加载"></a>懒加载</h3><p>这个功能我觉得还是很重要的，懒加载的意思，我说个粗糙的理解吧：图片懒得加载，只有你想看它的时候，它才会去加载。图片在整个页面上的占比，一般也不小了，而对所有的图片进行懒加载，可以让用户首次访问时间快很多。包括预览图片的沙箱、评论系统等等，全部采用懒加载，对白屏的影响是会减少很多的，毕竟别人访问网站时，页面白屏可能会导致用户流失。</p><h3 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h3><p>还有许多的方法，比如：优化资源加载顺序、避免JavaScript阻塞页面渲染、采用高效的缓存策略提供静态资源等等。可以去<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vc3BlZWQvcGFnZXNwZWVkL2luc2lnaHRzLz9obD16aC1jbg==">PageSpeed Insights<i class="fa fa-external-link-alt"></i></span>做一个简单的网站性能测试，测试完之后会给出一些诊断结果和优化建议。我虽然只是个菜鸟后端，不太懂前端，但还是希望能给大家提供一个优化的思路。</p></div><div><div><div style="text-align:center;color:#ccc;font-size:14px">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div></div></div><div class="reward-container"><div>请我喝杯咖啡吧！</div> <button onclick='var qr=document.getElementById("qr");qr.style.display="none"===qr.style.display?"block":"none"'> 打赏</button><div id="qr" style="display:none"><div style="display:inline-block"> <img src="https://sc03.alicdn.com/kf/H5b14df755b3a4d6fb58ad1aa4240a256C.jpg" data-original="/images/wechatpay.png" alt="Bess Croft 微信支付"><p>微信支付</p></div><div style="display:inline-block"> <img src="https://sc03.alicdn.com/kf/H5b14df755b3a4d6fb58ad1aa4240a256C.jpg" data-original="/images/alipay.jpg" alt="Bess Croft 支付宝"><p>支付宝</p></div></div></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> Bess Croft</li><li class="post-copyright-link"> <strong>本文链接：</strong> <a href="https://blog.52bess.com/posts/2021/website-server-speed-optimization.html" title="网站和服务器速度优化">https://blog.52bess.com/posts/2021/website-server-speed-optimization.html</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用<span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="fab fa-fw fa-creative-commons"></i> BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div><div class="followme"><p>欢迎关注我的其它发布渠道哦！</p><div class="social-list"><div class="social-item"> <a target="_blank" class="social-link" href="/images/wechat_channel.jpg"><img src="https://sc03.alicdn.com/kf/H5b14df755b3a4d6fb58ad1aa4240a256C.jpg" data-original="/images/wechat_channel.jpg" width="100px" height="100px"><span class="icon"><i class="fab fa-weixin"></i></span> <span class="label">WeChat</span></a></div><div class="social-item"> <a target="_blank" class="social-link" href="/images/RSS.png"><img src="https://sc03.alicdn.com/kf/H5b14df755b3a4d6fb58ad1aa4240a256C.jpg" data-original="/images/RSS.png" width="100px" height="100px"><span class="icon"><i class="fa fa-rss"></i></span> <span class="label">RSS</span></a></div></div></div><footer class="post-footer"><div class="post-tags"><a href="/tags/%E7%BD%91%E7%AB%99%E4%BC%98%E5%8C%96/" rel="tag"><i class="fa fa-tag"></i> 网站优化</a><a href="/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%BC%98%E5%8C%96/" rel="tag"><i class="fa fa-tag"></i> 服务器优化</a></div><div class="post-nav"><div class="post-nav-item"></div><div class="post-nav-item"> <a href="/posts/2021/ioc-auto-injection-annotation.html" rel="next" title="IOC依赖注入——自动注入的三个注解">IOC依赖注入——自动注入的三个注解<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="valine-comments"></div><script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#前言"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#开始优化"><span class="nav-number">2.</span> <span class="nav-text">开始优化</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#为什么我们需要优化？"><span class="nav-number">2.1.</span> <span class="nav-text">为什么我们需要优化？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DNS解析优化"><span class="nav-number">2.2.</span> <span class="nav-text">DNS解析优化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#链路优化"><span class="nav-number">2.3.</span> <span class="nav-text">链路优化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#动态OR静态"><span class="nav-number">2.4.</span> <span class="nav-text">动态OR静态</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据库"><span class="nav-number">2.5.</span> <span class="nav-text">数据库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据的计算-渲染时间"><span class="nav-number">2.6.</span> <span class="nav-text">数据的计算&#x2F;渲染时间</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CPU的性能"><span class="nav-number">2.7.</span> <span class="nav-text">CPU的性能</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#加密-安全"><span class="nav-number">2.8.</span> <span class="nav-text">加密&#x2F;安全</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#内存优化"><span class="nav-number">2.9.</span> <span class="nav-text">内存优化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#网络攻击防护"><span class="nav-number">2.10.</span> <span class="nav-text">网络攻击防护</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#服务器与CDN的优化"><span class="nav-number">2.11.</span> <span class="nav-text">服务器与CDN的优化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#服务器入侵自查"><span class="nav-number">2.12.</span> <span class="nav-text">服务器入侵自查</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#静态资源优化"><span class="nav-number">2.13.</span> <span class="nav-text">静态资源优化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#懒加载"><span class="nav-number">2.14.</span> <span class="nav-text">懒加载</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#最后"><span class="nav-number">2.15.</span> <span class="nav-text">最后</span></a></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <a href="/"><img class="site-author-image" itemprop="image" alt="Bess Croft" src="https://www.52bess.com/uploads/avatar.png"></a><p class="site-author-name" itemprop="name">Bess Croft</p><div class="site-description" itemprop="description">热爱网络技术和开源软件的极客</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">34</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">23</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">44</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2Jlc3Njcm9mdA==" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;besscroft"><i class="fab fa-github fa-fw"></i> GitHub</span></span><span class="links-of-author-item"><span class="exturl" data-url="bWFpbHRvOmJlc3Njcm9mdEBmb3htYWlsLmNvbQ==" title="E-Mail → mailto:besscroft@foxmail.com"><i class="fa fa-envelope fa-fw"></i> E-Mail</span></span></div><div class="cc-license motion-element" itemprop="license"> <span class="exturl cc-opacity" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><img src="https://sc03.alicdn.com/kf/H5b14df755b3a4d6fb58ad1aa4240a256C.jpg" data-original="/images/cc-by-nc-sa.svg" alt="Creative Commons"></span></div><div class="links-of-blogroll motion-element"><div class="links-of-blogroll-title"><i class="globe fa-fw"></i> 一些♂链接</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"> <span class="exturl" data-url="aHR0cHM6Ly81MmJlc3MuY29t" title="https:&#x2F;&#x2F;52bess.com">主站</span></li><li class="links-of-blogroll-item"> <a href="https://blog.52bess.com/about/" title="https:&#x2F;&#x2F;blog.52bess.com&#x2F;about&#x2F;">关于此博客</a></li><li class="links-of-blogroll-item"> <span class="exturl" data-url="aHR0cHM6Ly9yZXN1bWUuNTJiZXNzLmNvbS9wdWJsaWMv" title="https:&#x2F;&#x2F;resume.52bess.com&#x2F;public&#x2F;">简历</span></li><li class="links-of-blogroll-item"> <span class="exturl" data-url="aHR0cHM6Ly9taXJyb3JzLjUyYmVzcy5jb20v" title="https:&#x2F;&#x2F;mirrors.52bess.com&#x2F;">神奇海螺镜像站</span></li><li class="links-of-blogroll-item"> <a href="https://blog.52bess.com/" title="https:&#x2F;&#x2F;blog.52bess.com">博客</a></li><li class="links-of-blogroll-item"> <span class="exturl" data-url="aHR0cHM6Ly9iZXNzY2xvdWQuY2Y=" title="https:&#x2F;&#x2F;besscloud.cf">海螺小店</span></li></ul></div></div><div id="days"></div><script>function show_date_time(){window.setTimeout("show_date_time()",1e3),BirthDay=new Date("10/08/2018 10:00:00"),today=new Date,timeold=today.getTime()-BirthDay.getTime(),sectimeold=timeold/1e3,secondsold=Math.floor(sectimeold),msPerDay=864e5,e_daysold=timeold/msPerDay,daysold=Math.floor(e_daysold),e_hrsold=24*(e_daysold-daysold),hrsold=setzero(Math.floor(e_hrsold)),e_minsold=60*(e_hrsold-hrsold),minsold=setzero(Math.floor(60*(e_hrsold-hrsold))),seconds=setzero(Math.floor(60*(e_minsold-minsold))),document.getElementById("days").innerHTML="已运行 "+daysold+" 天 "+hrsold+" 小时 "+minsold+" 分 "+seconds+" 秒"}function setzero(e){return e<10&&(e="0"+e),e}show_date_time()</script></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="beian"><span class="exturl" data-url="aHR0cDovL3d3dy5iZWlhbi5taWl0Lmdvdi5jbg==">鄂ICP备18028478号-4</span></div><div class="copyright"> &copy; 2018 – <span itemprop="copyrightYear">2021</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">Bess Croft</span></div><div class="powered-by">由 <span class="exturl theme-link" data-url="aHR0cHM6Ly9naXRodWIuY29tL2Jlc3Njcm9mdA==">BessCroft</span> & <span class="exturl theme-link" data-url="aHR0cHM6Ly9naXRodWIuY29tL3RoZW1lLW5leHQvaGV4by10aGVtZS1uZXh0">NexT 7.8.0.</span> 强力驱动</div><div class="footer-end"><div class="footer-end1"> <a href="https://www.jsdelivr.com/" target="_blank" alt="Free CDN" rel="nofollow"><img src="https://sc03.alicdn.com/kf/H5b14df755b3a4d6fb58ad1aa4240a256C.jpg" data-original="https://cdn.jsdelivr.net/gh/besscroft/cdn/img/icon/JsDelivr.png" alt="jsDelivr" style="height:2em;max-height:2em;padding-bottom:0"></a></div>&nbsp;&nbsp;<div class="footer-end1"> <a href="https://github.com/" target="_blank" alt="Github" rel="nofollow"><img src="https://sc03.alicdn.com/kf/H5b14df755b3a4d6fb58ad1aa4240a256C.jpg" data-original="https://cdn.jsdelivr.net/gh/besscroft/cdn/img/icon/Github.png" alt="github" style="height:2.2em;max-height:2.5em;padding-bottom:0"></a></div>&nbsp;&nbsp;<div class="footer-end1"> <a href="https://www.netlify.com/" target="_blank" alt="Server provider" rel="nofollow"><img src="https://sc03.alicdn.com/kf/H5b14df755b3a4d6fb58ad1aa4240a256C.jpg" data-original="https://cdn.jsdelivr.net/gh/besscroft/cdn/img/icon/netlify.png" alt="netlify" style="height:2.2em;max-height:2.5em;padding-bottom:0"></a></div>&nbsp;&nbsp;<div class="footer-end1"> <a href="https://cloud.google.com/" target="_blank" alt="Server provider" rel="nofollow"><img src="https://sc03.alicdn.com/kf/H5b14df755b3a4d6fb58ad1aa4240a256C.jpg" data-original="https://cdn.jsdelivr.net/gh/besscroft/cdn/img/icon/google-cloud.png" alt="googlecloud" style="height:2.2em;max-height:2.5em;padding-bottom:0"></a></div>&nbsp;&nbsp;<div class="footer-end1"> <a href="https://www.aliyun.com" target="_blank" alt="Server provider" rel="nofollow"><img src="https://sc03.alicdn.com/kf/H5b14df755b3a4d6fb58ad1aa4240a256C.jpg" data-original="https://cdn.jsdelivr.net/gh/besscroft/cdn/img/icon/aliyun.png" alt="aliyun" style="height:2.2em;max-height:2.5em;padding-bottom:0"></a></div>&nbsp;&nbsp;<div class="footer-end1"> <a href="https://www.upyun.com/" target="_blank" alt="Server provider" rel="nofollow"><img src="https://sc03.alicdn.com/kf/H5b14df755b3a4d6fb58ad1aa4240a256C.jpg" data-original="https://cdn.jsdelivr.net/gh/besscroft/cdn/img/icon/%E5%8F%88%E6%8B%8D%E4%BA%91_logo5.png" alt="upyun" style="height:2.2em;max-height:2.5em;padding-bottom:0"></a></div>&nbsp;&nbsp;<div class="footer-end1"> <a href="https://vercel.com/" target="_blank" alt="Server provider" rel="nofollow"><img src="https://sc03.alicdn.com/kf/H5b14df755b3a4d6fb58ad1aa4240a256C.jpg" data-original="https://cdn.jsdelivr.net/gh/besscroft/cdn/img/icon/Vercel.png" alt="Vercel" style="height:2.2em;max-height:2.5em;padding-bottom:0"></a></div>&nbsp;&nbsp;<div class="footer-end1"> <a href="https://nextjs.org/" target="_blank" alt="Server provider" rel="nofollow"><img src="https://sc03.alicdn.com/kf/H5b14df755b3a4d6fb58ad1aa4240a256C.jpg" data-original="https://cdn.jsdelivr.net/gh/besscroft/cdn/img/icon/Next.png" alt="Next" style="height:2.2em;max-height:2.5em;padding-bottom:0"></a></div>&nbsp;&nbsp;</div><div style="display:none"><script src="//s95.cnzz.com/z_stat.php?id=1278139383&web_id=1278139383"></script></div></div></footer></div><script src="/lib/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><script src="/js/local-search.js"></script><script src="//code.tidio.co/ooy0sel3mgcojgqg8pgqtafsc3i9jtjd.js"></script><script>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'forest',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script><script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : true,
      notify     : false,
      appId      : 'pcvL1JhE0y29EMcEdiYXL0t8-MdYXbMMI',
      appKey     : 'l1NnWuPVxr54hge6jHS2KEKj',
      placeholder: "说点儿什么吧~ o(*￣▽￣*)o，记得留下邮箱，方便我及时回复！也可以加群：821557332 一起交流！",
      avatar     : 'wavatar',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script><script>window.imageLazyLoadSetting={isSPA:!1,processImages:null}</script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})})</script><script>!function(n){n.imageLazyLoadSetting.processImages=i;var e=n.imageLazyLoadSetting.isSPA,r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function i(){e&&(r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var t,a=0;a<r.length;a++)0<=(t=r[a].getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(n.innerHeight||document.documentElement.clientHeight)&&function(){var t,e,n,i,o=r[a];t=o,e=function(){r=r.filter(function(t){return o!==t})},n=new Image,i=t.getAttribute("data-original"),n.onload=function(){t.src=i,e()},n.src=i}()}i(),n.addEventListener("scroll",function(){var t,e;t=i,e=n,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)})}(this)</script></body></html><canvas class="fireworks" style="position:fixed;left:0;top:0;z-index:1;pointer-events:none"></canvas><script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/gh/besscroft/cdn/js/fireworks.js"></script><script src="https://cdn.jsdelivr.net/gh/besscroft/cdn/js/activate-power-mode.min.js"></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!1,document.body.addEventListener("input",POWERMODE)</script>